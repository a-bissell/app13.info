<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>app13.info - Now Playing</title>
<script src="https://unpkg.com/@ruffle-rs/ruffle/ruffle.js"></script>
<style>
body {
    background-color: #ffffff;
    color: #000000;
    font-family: Verdana, Arial, Helvetica, sans-serif;
    font-size: 12px;
    margin: 0;
    padding: 0;
    text-align: center;
}
a { color: #0000ee; }
a:visited { color: #551a8b; }
a:hover { color: #ff0000; }
#game-container {
    display: inline-block;
    background-color: #000000;
    border: 1px solid #000000;
    width: 700px;
    height: 525px;
}
#game-container ruffle-player {
    width: 700px;
    height: 525px;
}
#error-msg {
    display: none;
    border: 1px solid #cccccc;
    padding: 15px;
    margin: 15px auto;
    max-width: 450px;
    font-size: 11px;
    color: #555555;
}
</style>
</head>
<body>

<br>

<h2 id="game-title">Loading...</h2>

<div id="game-container"></div>

<p style="font-size:10px;color:#999999;">Click the game to focus.</p>

<div id="error-msg">
    <b>Game Not Found</b><br><br>
    The .swf file for this game hasn't been added yet.<br>
    To add it, place the file in the <code>games/</code> folder with this filename:<br><br>
    <code id="expected-file"></code><br><br>
    <span style="font-size:10px;">
        Tip: Many classic Flash games can be found in
        <a href="https://flashpointarchive.org/" target="_blank">BlueMaxima's Flashpoint</a> archive.
    </span>
</div>

<p><a href="index.html">&laquo; Back to all games</a></p>

<script>
window.RufflePlayer = window.RufflePlayer || {};
window.addEventListener("DOMContentLoaded", function() {
    var params = new URLSearchParams(window.location.search);
    var game = params.get("game");

    if (!game) {
        window.location.href = "index.html";
        return;
    }

    var gameName = game.replace(/-/g, " ").replace(/\b\w/g, function(c) { return c.toUpperCase(); });
    document.getElementById("game-title").textContent = gameName;
    document.title = "app13.info - " + gameName;

    var swfPath = "games/" + game + ".swf";
    document.getElementById("expected-file").textContent = swfPath;

    var container = document.getElementById("game-container");
    var errorMsg = document.getElementById("error-msg");

    var ruffle = window.RufflePlayer.newest();
    var player = ruffle.createPlayer();
    player.style.width = "700px";
    player.style.height = "525px";
    container.appendChild(player);

    player.ruffle().load(swfPath).catch(function() {
        container.style.display = "none";
        errorMsg.style.display = "block";
    });
});
</script>

</body>
</html>
